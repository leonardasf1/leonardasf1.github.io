<div id="pageTitle">RegExp</div>
<div id="pageLogo"><a href="#regexp">RegExp</a></div>

<div id="links">
	<a href="https://regexr.com/">regexr.com</a><br>
	<a href="https://learn.javascript.ru/regular-expressions"><img src="http://learn.javascript.ru/img/favicon/favicon.png" alt="learn.javascript.ru">learn.javascript.ru</a><br>
	<a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/RegExp">developer.mozilla.org</a>
</div>

<div>
  <ul>
<li><details><summary>знаки</summary>
  <pre><code>
  // Флаги
  i // не зависит от регистра.
  g // с этим флагом ищет все совпадения, без него только первое
  m // многострочный режим якорей ^ $
  //s // dotall, . может соответствовать \n (not work!!!)
  u // правильная работа с unicode (в firefox и edge не работает)
  y // ровно на позиции lastIndex, ни до ни после

    // Метасимволы.
  \w // латиница, цифры, подчеркивание [a-zA-Z0-9_].
  \W // все,кроме \w
  \s // любой пробельный символ (тоже самое, что [\r\n\f\v\t])
  \S // Любой не пробельный символ (тоже самое, что [^\r\n\f\v\t])
  \d // любая цифра (digit) [0-9]
  \D // не цифры
  .  // любой символ, /CS.3/ ,кроме \n
  \v // (вертикальная табуляция)
  \t // (табуляция)
  \r // (перевод каретки)
  \n // (перевод строки)
  \f // (перевод страницы)

  //экранирование
  /\./; // найти точку
  /\(text\)/; // найти (text)
  /\\/; // найти \
  /\//; // найти /
  в [] не нужно, кроме если означает что-то особенное

    // Наборы символов (любой из заданных символов)
  [RrGgBb] // Соответствие указанным символам
  [a-z] // Соответствие символам английского алфавита в нижнем регистре
  [0-9] // Соответствие указанным цифрам
  [^0-9] // Соответствие с чем угодно кроме цифр заданного диапазона
  // экранирование не нужно, кроме если означает что-то особенное
  /[tx]op/gi; // top и/или xop
  /[\w-]/; // \w or -
  /(['"])(.*?)\1/g; // \1 ссылается на первую скобочную группу
    // найти тоже самое что в первой скобочной группе
  /(?< quote>['"])(.*?)\k< quote>/g; //тоже самое по имени

  /^((?=(?< word>\w+))\k< word>\s?)*$/; // запрет catastrophic backtracking

    // Квантификатор (Кванторы)
  + //Один или несколько символов
  * //ноль и более символов
  ? //ноль или одно вхождение
  +?, *?, ?? // ленивый режим
  /\d+/; // последовательность из одной и более цифр
  /colou?r/; // color и colour
  /<\/?[a-z][a-z0-9]*>/i; // открывающий и закрывющий тег без атрибутов
  /<\/?\w+>/ // почти тоже самое

    // Интервалы
  {3} // точное количество совпадений 3
  {2,3} // диапазон 2-3
  {3,} // не менее 3
  {,3} // не более 3
  \d{5} // \d\d\d\d\d

    // Якорные символы
  ^  /^Mary/ //найдёт если это слово в начале строки
  $  /fin$/ // найдёт если это слово в конце строки
    /^\d\d[-:]\d\d$/; // время формата 12:34 или 12-34
    /^\d/gm; // цифра в начале каждой строки

//проверка
  /x(?=y)/ // x,y - любые шаблоны
  // проверяет, следует ли y за x-ом
  /x(?!y)/
  /x(?=(y))/; // дополнительные скобки включают в результат проверку

  \b // проверяет что \w только с одной стороны
    /\bJava\b/; //Java , <s>JavaScript</s>
    /\b\d\d\b/g; // отдельно стоящие двузначные числа 23

</code></pre></details></li>
    <li><details><summary>методы</summary>
      <pre><code>
  /\d\d\d/gmi // type object
  let varName = /< h2>/gm;

  let varName = new RegExp(`<${prompt()}>`);
  // метод new RegExp не требует / /
  // а \ съедается строкой "", поэтому их надо удвоить \\
  new RegExp("\\d\\.\\d"); // \d\.\d - 5.1

  str.match(/.../gi); // принимает регулярное выражение и возвращает массив с результатами поиска
        if not - return null
        let result = str.match(/<(.+?)>/); // возвращает массив с первым совпадением
        result.length // длина массива 1
        result.index // индекс совпадения
        result.input // исходная строка
        result[0] // < h1>
        result[1] // h1
    //  ?< > именование скобочных групп
    /(?< year>[0-9]{4})-(?< month>[0-9]{2})-(?< day>[0-9][2])/;
        result.groups.year;
        let {year, month, day} = result.groups;
    //  ?: исключает из запоминания
    /<(?:.+?)>/

  str.matchAll(/<(.+?)>/g); // return object массивов

  str.replace(/we/ig, "As") // заменяет найденное на As
  str.replace(/we/ig, "$& As") // "...We As..."
  let str = "John Bull";
  let regexp = /(\w+) (\w+)/;
  alert( str.replace(regexp, '$2, $1')); // Bull, John
  let regexp = /(?< year>[0-9]{4})-(?< month>[0-9]{2})-(?< day>[0-9]{2})/g;
  let str = "2019-10-30, 2020-01-01";
  alert( str.replace(regexp, '$< day>.$< month>.$< year>'));
  // 30.10.2019, 01.01.2020
  str.replace(regexp, funcName);
  str.replace(regexp, () => {});
  func(match, p1, p2, ..., pn, offset, input, groups):
match – найденное совпадение,
p1, p2, ..., pn – содержимое скобок (см. главу Скобочные группы).
offset – позиция, на которой найдено совпадение,
input – исходная строка,
groups – объект с содержимым именованных скобок

  pattern.exec("string") // возвращает результат поиска по шаблону(только 1й, если не задано g)

  pattern.test("string") // проверяет соответствие с шаблоном
    /love/i.test("i love java"); // true

  pattern.lastIndex; // позиция за совпадением 3, до начала поиска 0
    pattern.lastIndex = 4; // начать поиск с позиции 4

("+7(903)-123-45-67").match(/\d/g).join(''); // "79031234567" находим цифры и соединяем
("+7(903)-123-45-67").replace(/\D/g, ""); // "79031234567" убираем не цифры
("+7(903)-123-45-67").match(/\d+/); // 7,903,123,45,67
</code></pre></details></li>
<li><details><summary>patterns</summary>
  <pre><code>
/[-.\w]+@([\w-]+\.)+\w+/g; // email
/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/i; // email

/(https?:\/\/)?(www\.)?[a-z0-9-\.]{2,30}\.ru/gi; 
  //для поиска веб-сайтов с доменом .ru

/([01]\d|2[0-3])[-:][0-5]\d/g; //  время формата 12:04 или 23-54

/<.+?>/g // любой тег с атрибутами
/< тег.*?>/g; // конкретный тег с атрибутами
/<(teg).*?>(.|\n)*?<\/\1>/g; // парный тег с атрибутами и содержимым

/[-\d.]+\b/g; // любое десятичное число
/([-\d.]+\b) ?([-+*/]) ?([-\d.]+\b)/g; //арифметические выражения
/x[0-9A-F]{2}/g; // шестнадцатеричное число xAF
/#([0-9A-F]{3}){1,2}\b/gi; // color #af23cd и #ae6
/\[(.+?)\](.|\n)+?\[\/\1\]/g; // bb-коды
</code></pre></details></li>
<li><details><summary>unicode</summary>
  <pre><code class="js">
    <a href="https://learn.javascript.ru/regexp-unicode">learn.javascript.ru</a>
  u // правильная работа с unicode (в firefox и edge не работает)
/\p{L}/gu; // найдёт все буквы любого алфавита

Буквы L:
  в нижнем регистре Ll,
  модификаторы Lm,
  заглавные буквы Lt,
  в верхнем регистре Lu,
  прочие Lo.
Числа N:
  десятичная цифра Nd,
  цифры обозначаемые буквами (римские) Nl,
  прочие No.
Знаки пунктуации P:
  соединители Pc,
  тире Pd,
  открывающие кавычки Pi,
  закрывающие кавычки Pf,
  открывающие скобки Ps,
  закрывающие скобки Pe,
  прочее Po.
Отметки M (например, акценты):
  двоеточия Mc,
  вложения Me,
  апострофы Mn.
Символы S:
  валюты Sc,
  модификаторы Sk,
  математические Sm,
  прочие So.
Разделители Z:
  линия Zl,
  параграф Zp,
  пробел Zs.
Прочие C:
  контрольные Cc,
  форматирование Cf,
  не назначенные Cn,
  для приватного использования Co,
  суррогаты Cs.

"число: xAF".match(/x\p{Hex_Digit}\p{Hex_Digit}/u); // xAF
Hex_Digit //шестнадцатеричные числа
/\p{sc=Cyrillic}/gu; // найдёт кириллические символы
/\p{sc=Han}/gu; // найдёт китайские иероглифы
/\p{Sc}\d/gu; //  найдёт валюту

\p{Alpha}  // буквы
\p{Join_C} // два специальных кода 200c и 200d, используемые в лигатурах, например арабских
  </code></pre></details></li>

  </ul>
</div>