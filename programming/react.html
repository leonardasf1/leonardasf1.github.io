<div id="pageTitle">ReactJS</div>
<div id="pageLogo"><a href="#react">
    <img src="../icons/react.svg" alt="react"></a></div>

<div id="links">
    <a href="https://reactjs.org/"><img src="../icons/react.svg" alt="reactjs.org">Документация</a><br>
    <a href="https://flow.org/"><img src="https://flow.org/static/favicon.png" alt="flow" style="height: 16px"> Flow</a><br>
    <a href="https://ru.reactjs.org/docs/static-type-checking.html">ru.reactjs.org</a><br>
    <a href="https://redux.js.org/">redux.js.org</a><br>
    <a href="https://nextjs.org/"><img src="https://nextjs.org/static/favicon/favicon-32x32.png" alt="next.js">nextjs.org</a><br>
</div>

<div>
  <a href="https://youtu.be/0UbkJ6Izue8">React: монтируй, демонтируй, обновляй. ШРИ2020</a><br>
  <a href="https://youtu.be/SnmfK4YuGlk">React-приложение. ШРИ2020</a><br>
    * <a href="https://itvdn.com/ru/video/react-js-essential">ReactJS Essential Without ES6</a> <!-- <a href="primery/react1.html">result</a> --> 
    <a href="https://github.com/krambertech/react-essential-course">krambertech/</a><br>
    <a href="https://youtu.be/-k8w0x-rp80">Уроки React JS. webDeveloperBlog.2020</a><br>
    * <a href="https://youtu.be/xJZa2_aldDs">React JS. Полный Курс 2020</a><br>
    * <a href="https://youtu.be/Z7_7xvJ7Cjc">React. Иммутабельность данных</a><br>
    * <a href="https://youtu.be/bFVAVXWySzM">React Hooks - зачем придумали</a><br>
    * <a href="https://www.youtube.com/playlist?list=PLqKQF2ojwm3n6YO3BDSQIg35GGKn_ImFD">Введение в React Hooks .2019</a><br>
    * <a href="https://youtu.be/V1rhxheJg4A">React JS. Контекст, Хуки, Анимации, Деплой</a><br>
    <a href="https://youtu.be/OvLWWvjoi8s">React JS + TypeScript (+ React Router DOM)</a><br>
    <a href="https://itvdn.com/ru/video/react_adv">React Advanced</a><br>
    * <a href="https://youtu.be/G3GGXIhggGs">React Redux + Saga. Практический Курс</a><br>
    <a href="https://habr.com/en/post/269831/">С 0 до 1. Разбираемся с Redux</a><br>
    * <a href="https://youtu.be/YdYyYMFPa44">Redux. Полный Курс 2020</a><br>
    <a href="https://itvdn.com/ru/video/isomorphic-application">Изоморфные приложения на React</a><br>
</div>

<div>
    <pre><code>
npx create-react-app appName //или
npm i -g yarn
yarn create react-app app-name
yarn add node-sass <a href="https://reacttraining.com/react-router/web/guides/quick-start">react-router-dom</a> bootstrap axios
yarn add react-transition-group //animation <a href="https://reactcommunity.org/react-transition-group/">reactcommunity.org</a>
yarn start
yarn build

npm install prop-types

<a href="https://marketplace.visualstudio.com/items?itemName=dsznajder.es7-react-js-snippets">snippets</a>
    </code></pre>
</div>

<div>
    <pre><code>
import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';

ReactDOM.render(
  < React.StrictMode>
    < App
        name="Igor"
        article={article}
        onClick={activateLasers}
    />
  < /React.StrictMode>,
  document.getElementById('root')
);
    </code></pre>
</div>

<div>
    <details>
        <summary>функциональные компоненты</summary>
        <pre><code>
const Example = (props) => {
  // Тут мог бы быть ваш хук!
  return < h1>Привет, {props.name}< /h1>;
}
function Example(props) {
  // Тут мог бы быть ваш хук!
  return < h1>Привет, {props.name}< /h1>;
}

function NumberList(props) {
  const numbers = props.numbers;
  return (
    < ul>
      {numbers.map((number) =>
        < ListItem
            key={number.toString()}
            value={number}
        />
      )}
    < /ul>
  );
}
        </code></pre>
    </details>
    <h2>Хуки</h2>
    <details>
        <summary>useState</summary>
        <pre><code>
import React, { useState } from 'react';

function Example() {
  // Объявление новой переменной состояния «count»
  const [count, setCount] = useState(0);

  return (
    < div>
      < p>Вы кликнули {count} раз(а)< /p>
      < button onClick={() => setCount(count + 1)}>< /button>
    < /div>
  );
}
//-----------

const [state, setState] = useState({ left: 0, top: 0, width: 100, height: 100 });

useEffect(() => {
    function handleWindowMouseMove(e) {
        // Использование "...state" гарантирует, что мы не потеряем width и height
        setState(state => ({ ...state, left: e.pageX, top: e.pageY }));
    }
}
        </code></pre>
    </details>
    <details>
        <summary>useEffect</summary>
        <pre><code>
function FriendStatusWithCounter(props) {
  const [count, setCount] = useState(0);
        // Аналогично componentDidMount и componentDidUpdate:
  useEffect(() => {
    document.title = `Вы нажали ${count} раз`;
  }, [count]); // Перезапускать эффект только если count поменялся

  const [isOnline, setIsOnline] = useState(null);

  useEffect(() => {
    function handleStatusChange(status) {
      setIsOnline(status.isOnline);
    }
    ChatAPI.subscrFriendSt(
        props.friend.id,
        handleStatusChange
    );
    return () => {
      ChatAPI.unsubscrFriendSt(
        props.friend.id,
        handleStatusChange
      );
    }; //сброс, чтобы не случилось утечек памяти
  }, [props.friend.id]);
  // Повторно подписаться, только если props.friend.id изменился

  return ()
}
        </code></pre>
    </details>
    <details>
        <summary>Композиция</summary>
        <pre><code>
function SplitPane(props) {
  return (
    < div className="SplitPane">
      < div className="SplitPane-left">
        {props.left}
      < /div>
      < div className="SplitPane-right">
        {props.right}
      < /div>
    < /div>
  );
}

function App() {
  return (
    < SplitPane
      left={< Contacts />}
      right={< Chat />}
    />
  );
}
        </code></pre>
    </details>
    <details>
        <summary></summary>
        <pre><code></code></pre>
    </details>
</div>

<div><h2>Классовые компоненты</h2>
    <details>
        <summary>state / setState</summary>
        <pre><code>
class Example extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }

  render() {
    return (
      < div>
        < p>Вы кликнули {this.state.count} раз(а)< /p>
        < button onClick={() => this.setState({ count: this.state.count + 1 })}>< /button>
      < /div>
    );
  }
}
//---------

this.setState({})
this.setState((state, props) => ({}))
this.setState(function(state, props) { return {} })

Компонент может передать вниз setState,
передав в пропсы функцию с setState !
        </code></pre>
    </details>
    <details>
        <summary>lifecycle</summary>
        <pre><code>
class Example extends React.Component {
    constructor(props) {}

    componentDidMount() {
        document.title = `Вы нажали ${this.state.count} раз`;
    }
    componentDidUpdate() {
        document.title = `Вы нажали ${this.state.count} раз`;
    }
    componentWillUnmount() {
        ChatAPI.unsubscribeFromFriendStatus(
          this.props.friend.id,
          this.handleStatusChange
        );
    } //сброс, чтобы не случилось утечек памяти

    render() {}
}
//-------------
shouldComponentUpdate() //если extends 
//React.PureComponent то не надо
        </code></pre>
    </details>
    <details>
        <summary>this.callback</summary>
        <pre><code>
class Toggle extends React.Component {
  constructor(props) {
    super(props);
    this.state = {isToggleOn: true};

    // Эта привязка обязательна для работы `this` в колбэке.
    this.handleClick = this.handleClick.bind(this);
  }

  handleClick() {
    this.setState(state => ({
      isToggleOn: !state.isToggleOn
    }));
  }
  render() {
    return (
      < button onClick={this.handleClick}>
        {this.state.isToggleOn ? 'Включено' : 'Выключено'}
      < /button>
    );
  }
}

ReactDOM.render(
  < Toggle />,
  document.getElementById('root')
);
        </code></pre>
    </details>
    <details>
        <summary>events</summary>
        <pre><code>
rfc < button onClick={() => setCount(count + 1)}>...
rcc < button onClick={this.handleClick}>...
rcc < button onClick={(e) => this.deleteRow(id, e)}>...
rcc < button onClick={this.deleteRow.bind(this, id)}>...
rcc < button onClick={() => this.setState({ count: this.state.count + 1 })}>...
        </code></pre>
    </details>
    <details>
        <summary>forms</summary>
        <pre><code>
< textarea value={this.state.value} onChange={this.handleChange} />

< select value={this.state.value} onChange={this.handleChange}>
    < option value="grapefruit">Грейпфрут< /option>
    ...
< /select>

< select multiple={true} value={['Б', 'В']}>

<a href="https://jaredpalmer.com/formik">formik библиотека</a>
        </code></pre>
    </details>
    <details>
        <summary>Композиция</summary>
        <pre><code>
function Dialog(props) {
  return (
    < FancyBorder color="blue">
      < h1 className="Dialog-title">
        {props.title}
      < /h1>
      < p className="Dialog-message">
        {props.message}
      < /p>
      {props.children}
    < /FancyBorder>
  );
}

class SignUpDialog extends React.Component {
  constructor(props) {
    super(props);
    this.handleChange = this.handleChange.bind(this);
    this.handleSignUp = this.handleSignUp.bind(this);
    this.state = {login: ''};
  }

  render() {
    return (
      < Dialog title="Программа исследования Марса"
              message="Как к вам обращаться?">
        < input value={this.state.login}
               onChange={this.handleChange} /> 
        < button onClick={this.handleSignUp}>
          Запишите меня!
        < /button>
      < /Dialog>
    );
  }

  handleChange(e) {
    this.setState({login: e.target.value});
  }

  handleSignUp() {
    alert(`Добро пожаловать на борт, ${this.state.login}!`);
  }
}
        </code></pre>
    </details>
</div>

<div>App.js
    <pre><code>
import React, {useEffect} from 'react'

//динамический импорт
const ComponentName = React.lazy(() => import('./ComponentName'))

function App() {
  const [todos, setTodos] = React.useState([])
    // {id: 1, completed: false, title: 'Купить хлеб'}

  const [loading, setLoading] = React.useState(true)
  useEffect(() => {
    fetch('https://jsonplaceholder.typicode.com/todos?_limit=5')
    .then(response => response.json())
    .then(todos => {
      setTodos(todos)
      setLoading(false)
    })
  }, [])

  return (
    < Context.Provider value={{ removeTodo }} style={{ marginBottom: '1rem' }}>
      < div className="wrapper">
        < h1>React tutorial< /h1>
        < Modal>< /Modal>

        < React.Suspense fallback={< p>Loading....< /p>}>
          < AddTodo onCreate={addTodo}>< /AddTodo>
        < /React.Suspense>

        {loading && < Loader />}
        {todos.length ? (
          < TodoList todos={todos} onToggle={toggleTodo} />
        ) : (
          loading ? null : < p>No todos!< /p>
        )}
      < /div>
    < /Context.Provider>
  )
}
    </code></pre>
</div>

<div>
    <pre><code>
const styles = {
    ul: {
        listStyle: 'none'
    }
}
export default function TemplateFuncName(props) {
  return (
    < ul style={styles.ul}>
      { props.arrName.map(i => {
        return < Template2FuncName i={i} />
      }) }
    < /ul>
  )
}
< TemplateFuncName arrName={arrName} />

< React.Suspense fallback={< p>Loading....< /p>}>
  < AddTodo onCreate={addTodo}>< /AddTodo>
< /React.Suspense>

useContext()
    </code></pre>
</div>

<div><h2>Redux</h2>
    <pre><code>
yarn add redux react-redux
npm i redux
npm i redux-thunk //async
    </code></pre>
index.js
    <pre><code>
import { Provider } from 'react-redux'
import { createStore } from 'redux'

const reducer = (state, action) => {}
const store = createStore(reducer)

export default class App extends Component {
    render() {
        return(
        < Provider store={store}>
            < div>< /div>
        < /Provider>
        )
    }
}
    </code></pre>
actions.js
    <pre><code>
export function createPost(post) {
    return {
        type: 'CREATE_POST',
        payload: post
    }
}
    </code></pre>
reducer.js
    <pre><code>
const initialState = {
    posts: [],
    fetchedPosts: []
}

export const postsReducer = (state = initialState, action) => {
    switch (action.type) {
        case 'CREATE_POST':
            return { ...state, posts: state.posts.concat([action.payload]) }
            // return { ...state, posts: [...state.posts, action.payload] }
        case 'FETCH_POSTS':
            return { ...state, fetchedPosts: action.payload}
        default: return state
    }
}
    </code></pre>
</div>